= Contributing to JBake
// settings:
:idprefix:
:idseparator: -
:source-language: kotlin
:language: {source-language}
ifdef::env-github,env-browser[:outfilesuffix: .adoc]
// URIs:
:uri-repo: https://github.com/OndraZizka/jbake
:uri-help-base: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests
:uri-issues: {uri-repo}/issues
:uri-fork-help: {uri-help-base}/working-with-forks/fork-a-repo
:uri-branch-help: {uri-help-base}/working-with-forks/fork-a-repo#creating-a-branch-to-work-on
:uri-pr-help: {uri-help-base}/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request
:uri-gist: https://gist.github.com
:uri-kotest: https://kotest.io/
:uri-license: LICENSE
:uri-build: BUILD.adoc

Thank you for your interest in improving JBake! We appreciate you taking the time to contribute and to
ensure that your contribution is easy to review and process, please follow the guidance outlined below.

== License Agreement

By contributing changes to this repository, you agree to license your contributions under the link:{uri-license}[MIT license].
This ensures your contributions have the same license as the project and that the community is free to use your contributions.
You also assert that you are the original author of the work that you are contributing unless otherwise stated.

== Raising an Issue

We use the {uri-issues}[issue tracker on GitHub] associated with this project to track bugs and features. Before
submitting a bug report or feature request, check to make sure it hasn't already been submitted. When submitting
a bug report, please include a {uri-gist}[Gist] that includes any details that may help reproduce the bug,
including your local environment details (i.e. installation method, JVM version, and Operating System).

Most importantly, since JBake is a static site generator, reproducing most bugs requires that we have some snippet of
content on which triggers the bad behaviour in JBake.

== Raising a Pull Request

Before starting work on a Pull Request, please create an issue or check existing {uri-issues}[issues] to see if someone
is already working on the same topic. This helps avoid duplicate work and allows us to provide guidance on upcoming
structural or API changes.

Once you're ready to start work on your pull request:

. {uri-fork-help}[Fork the repository]
. {uri-branch-help}[Create a topic branch]
. Add tests for your feature or bug fix (see <<writing-and-executing-tests>>)
. Implement your feature or bug fix
. Run tests:
  * Gradle: `./gradlew test`
  * Maven: `mvn test`
. If tests fail, return to step 4
. Add, commit, and push your changes
. {uri-pr-help}[Submit a pull request]

=== Build Systems

JBake supports both Gradle and Maven. Changes to dependencies or build configuration should be synchronized between both
systems. See link:{uri-build}[BUILD.adoc] for detailed build instructions.

////
uncomment when code style & prefs have been defined
=== Code Style and Formatting

Please use the JBake code Eclipse formatting preferences[link] prior to starting work on any contribution. IntelliJ users
can import this into their IDE.
////

=== Writing and Executing Tests

Tests and their resources reside within `/src/test` directory. JBake is written in Kotlin and uses modern Kotlin testing frameworks.

==== Available Testing Libraries

* {uri-kotest}[Kotest] - Kotlin-native testing framework (preferred for new tests)
* MockK - Kotlin mocking library

For Kotlin tests, prefer Kotest as it provides idiomatic Kotlin testing support with expressive DSL.

==== Test Resources

Place any test resources (templates, sample content, etc.) in `/src/test/resources`.

==== Running Tests

**Gradle:**
----
./gradlew test
----

**Maven:**
----
mvn test
----

**IDE Support:**

Tests can be run directly in modern IDEs (IntelliJ IDEA, Eclipse, VS Code).

==== Guidelines

* Write tests for new features and bug fixes
* Ensure tests pass before submitting a PR
* Use descriptive test names in Kotlin style (backticks for readable names)
* Keep tests focused and isolated
* Prefer Kotest for new tests - it provides better Kotlin integration
* Use MockK for mocking Kotlin classes

=== Supported Java Versions

JBake requires **Java 17** for building and running. The project uses Maven toolchains to automatically select the correct
JDK version, so you need to have JDK 17 installed.

Maven will automatically use JDK 17 if you have `~/.m2/toolchains.xml` configured (see link:{uri-build}[BUILD.adoc]).

=== Code Language

The project is written entirely in **Kotlin**.

When contributing:

* All new code should be written in Kotlin
* Target Kotlin 2.2+ features
* Follow Kotlin coding conventions and idioms
* Use Kotlin's null-safety features
* Prefer immutable data structures where possible
* Follow existing code patterns in the module you're modifying

=== Documentation

If your pull request alters existing behavior or adds a new feature:

* Update relevant documentation in the `docs/` directory
* Update README.asciidoc if adding user-facing features
* Add or update KDoc comments for public APIs (Kotlin's documentation format)
* Consider adding examples in `test-data/` for new features
* Documentation is generated using Dokka for Kotlin code
